window.dataLayer=window.dataLayer||[],function(t){var r=null,e=null;function a(){return e||(window.hbspt&&window.hbspt.forms?((e=t.Deferred()).resolve(),e):e=t.ajax({url:"https://js.hsforms.net/forms/shell.js",dataType:"script",cache:!0}))}function o(r){var e=t(r),a=e.find(".wp-block-hubspot-form__form"),o={};a.data("portalId")&&(o.portalId=a.data("portalId")),a.data("portalId")&&(o.formId=a.data("formId")),e.attr("id")&&(o.target="#"+e.attr("id")+" .wp-block-hubspot-form__form"),o.onFormSubmit=function(t){var r={};(r=t.serializeArray().reduce((function(t,r){return t[r.name]=r.value,t}),{})).hs_context&&(r.hs_context=JSON.parse(r.hs_context)),dataLayer.push({event:"formSubmit",formAction:a.data("name"),formName:a.data("name"),formGuid:o.formId,formElement:t,formData:r}),a.trigger("formSubmit",[t,r])},o.onFormSubmitted=function(t){dataLayer.push({event:"formSubmitted",formAction:a.data("name"),formName:a.data("name"),formGuid:o.formId}),a.trigger("formSubmitted",[t])},o.onFormReady=function(r){if(r.parent().addClass(e.attr("class")),e.attr("style")&&r.attr("style",(r.attr("style")||"")+e.attr("style")),hubspotFormThemeCss&&a.data("customCss")){var o=t('<link rel="stylesheet" href="'+hubspotFormThemeCss+'" media="print" onload="this.media=\'all\'" /><noscript><link rel="stylesheet" href="'+hubspotFormThemeCss+'"></noscript>');o.on("load",(function(){hubspot.form.formRenderer.rerenderForms(hbspt.forms.shells)})),o.appendTo(r.closest("html").find("head"))}a.data("preloadField")&&a.data("preloadValue")&&(console.log(a.data("preloadField"),a.data("preloadValue"),r.find(".hs_"+a.data("preloadField")+" input")),r.find(".hs_"+a.data("preloadField")+" input").val(a.data("preloadValue"))),a.trigger("formReady",[r])},o.portalId&&o.formId&&hbspt.forms.create(o)}window.IntersectionObserver&&(r=new IntersectionObserver((function(t,r){for(var e=0;e<t.length;e++){var n=t[e];if(n.intersectionRatio<=0)return;a().done((function(){o(n.target),r.unobserve(n.target)}))}}),{root:null,rootMargin:"200px",threshold:.2})),t(".wp-block-hubspot-form").each((function(){var t=this;null!==r?r.observe(t):a().done((function(){o(t)}))}))}(jQuery);
